# üéâ –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Stars - –ì–û–¢–û–í–û!

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Stars**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π [Bot API](https://core.telegram.org/bots/api-changelog#may-27-2024)
- –í–∞–ª—é—Ç—ã `XTR` –¥–ª—è Telegram Stars
- –ö—É—Ä—Å: 2 ‚≠ê = 1 ‚ÇΩ
- –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook

### 2. **API Endpoints**
- **`/api/telegram-bot`** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- **`/api/payment-request/[id]`** - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
- **`/api/telegram-webhook`** - Webhook –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
- **`/api/stars-invoice-bot`** - –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞

### 3. **–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –∑–≤–µ–∑–¥–∞–º–∏"
2. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞: `https://t.me/stellexbank_bot?start=pay_uuid`
4. –ë–æ—Ç —Å–æ–∑–¥–∞–µ—Ç –∏–Ω–≤–æ–π—Å —á–µ—Ä–µ–∑ `sendInvoice`
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –∑–≤–µ–∑–¥–∞–º–∏
6. Webhook –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
7. –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=8093059096:AAGK5iIiJU53CD5NxOKuOfxS-H9CoFH0j9g
TELEGRAM_BOT_USERNAME=stellexbank_bot
NEXT_PUBLIC_APP_URL=https://tgwallet-ei8z.vercel.app

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# API Security
API_KEY=your_api_key
```

### 2. Webhook —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚úÖ
```bash
curl -X POST "https://api.telegram.org/bot8093059096:AAGK5iIiJU53CD5NxOKuOfxS-H9CoFH0j9g/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://tgwallet-ei8z.vercel.app/api/telegram-webhook"}'
```

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase
–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ `database_schema.sql` –≤ Supabase SQL Editor.

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –∑–≤–µ–∑–¥–∞–º–∏"**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- –í—ã–±–∏—Ä–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥ (100, 200, 500, 1000)
- –ù–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∏—Ç—å"

### 2. **–°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `payment_requests`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è UUID
- –°–æ–∑–¥–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞

### 3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–∞—Ç —Å [@stellexbank_bot](https://t.me/stellexbank_bot)
- –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start pay_uuid`
- –°–æ–∑–¥–∞–µ—Ç—Å—è –∏–Ω–≤–æ–π—Å —á–µ—Ä–µ–∑ `sendInvoice`

### 4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç**
- Telegram –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
- Telegram –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂

### 5. **Webhook –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**
- `/api/telegram-webhook` –ø–æ–ª—É—á–∞–µ—Ç `successful_payment`
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –≤ `payment_requests`
- –°–æ–∑–¥–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤ `transactions`
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook
```bash
curl -X GET "https://tgwallet-ei8z.vercel.app/api/telegram-webhook"
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"ok":true}
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–æ—Ç–∞
```bash
curl -X GET "https://api.telegram.org/bot8093059096:AAGK5iIiJU53CD5NxOKuOfxS-H9CoFH0j9g/getMe"
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
```

### 3. –¢–µ—Å—Ç –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –∑–≤–µ–∑–¥–∞–º–∏"
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥
4. –ù–∞–∂–º–∏—Ç–µ "–û–ø–ª–∞—Ç–∏—Ç—å"
5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤ –±–æ—Ç–∞
6. –û–ø–ª–∞—Ç–∏—Ç–µ –∑–≤–µ–∑–¥–∞–º–∏

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- **`/start`** - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- **`/start pay_uuid`** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
- **`/balance`** - –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–ª–∞–Ω—Å
- **`/help`** - –ü–æ–º–æ—â—å

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:
- ‚úÖ **–†–µ–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars**
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bot API**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞**
- ‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- ‚úÖ **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**

**–í–∞—à –±–æ—Ç**: [@stellexbank_bot](https://t.me/stellexbank_bot)
**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: https://tgwallet-ei8z.vercel.app

–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∑–≤–µ–∑–¥—ã —Ä–∞–±–æ—Ç–∞–µ—Ç! üöÄ‚≠ê
